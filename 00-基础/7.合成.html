<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>合成</title>
    <style>
        canvas {
    border: 1px solid black;
}
    </style>
</head>
<body>
    <canvas id="drawing" width="400" height="400">a drawing of something</canvas>

    <script>
        //获取canvas对象
        var drawing = document.getElementById('drawing')
        //检查getContext方法是否存在
        if(!drawing.getContext){};

        //2D上下文
        var ctx = drawing.getContext("2d")

        //合成的图形来说，绘制顺序会有限制。
        //不过，我们可以利用 globalCompositeOperation 属性来改变这种状况。
        // 1.ctx.globalCompositeOperation = "source-in"; 
        // 仅仅会出现新图像与原来图像重叠的部分，其他区域都变成透明的
        // ctx.fillStyle = "blue";
        // ctx.fillRect(0, 0, 200, 200);
    
        // ctx.globalCompositeOperation = "source-in"; 
        // ctx.fillStyle = "red";
        // ctx.fillRect(100, 100, 200, 200);


        // 2.ctx.globalCompositeOperation = "source-over"; 
        //全局合成操作
        // ctx.fillStyle = "blue";
        // ctx.fillRect(0, 0, 200, 200);
    
        // ctx.globalCompositeOperation = "source-over"; 
        // ctx.fillStyle = "red";
        // ctx.fillRect(100, 100, 200, 200);

        // 3.ctx.globalCompositeOperation = "source-out"; 
        //仅仅显示新图像与老图像没有重叠的部分，其余部分全部透明。(老图像也不显示)
        // ctx.fillStyle = "blue";
        // ctx.fillRect(0, 0, 200, 200);
    
        // ctx.globalCompositeOperation = "source-out"; 
        // ctx.fillStyle = "red";
        // ctx.fillRect(100, 100, 200, 200);

        // 4.ctx.globalCompositeOperation = "source-atop"; 
        //新图像仅仅显示与老图像重叠区域。老图像仍然可以显示。
        // ctx.fillStyle = "blue";
        // ctx.fillRect(0, 0, 200, 200);
    
        // ctx.globalCompositeOperation = "source-atop"; 
        // ctx.fillStyle = "red";
        // ctx.fillRect(100, 100, 200, 200);

        // 5.ctx.globalCompositeOperation = "destination-over"; 
        // 新图像会在老图像的下面。
        // ctx.fillStyle = "blue";
        // ctx.fillRect(0, 0, 200, 200);
    
        // ctx.globalCompositeOperation = "destination-over"; 
        // ctx.fillStyle = "red";
        // ctx.fillRect(100, 100, 200, 200);


        // 6.ctx.globalCompositeOperation = "destination-in"; 
        // 仅仅新老图像重叠部分的老图像被显示，其他区域全部透明。
        // ctx.fillStyle = "blue";
        // ctx.fillRect(0, 0, 200, 200);
    
        // ctx.globalCompositeOperation = "destination-in"; 
        // ctx.fillStyle = "red";
        // ctx.fillRect(100, 100, 200, 200);


        // 7.ctx.globalCompositeOperation = "destination-out"; 
        // 仅仅新老图像重叠部分的老图像被显示，其他区域全部透明。
        // ctx.fillStyle = "blue";
        // ctx.fillRect(0, 0, 200, 200);
    
        // ctx.globalCompositeOperation = "destination-out"; 
        // ctx.fillStyle = "red";
        // ctx.fillRect(100, 100, 200, 200);


        // 8.ctx.globalCompositeOperation = "destination-atop"; 
        // 老图像仅仅仅仅显示重叠部分，新图像会显示在老图像的下面。
        // ctx.fillStyle = "blue";
        // ctx.fillRect(0, 0, 200, 200);
    
        // ctx.globalCompositeOperation = "destination-atop"; 
        // ctx.fillStyle = "red";
        // ctx.fillRect(100, 100, 200, 200);

        // 9.ctx.globalCompositeOperation = "lighter"; 
        // 新老图像都显示，但是重叠区域的颜色做加处理
        // ctx.fillStyle = "blue";
        // ctx.fillRect(0, 0, 200, 200);
    
        // ctx.globalCompositeOperation = "lighter"; 
        // ctx.fillStyle = "red";
        // ctx.fillRect(100, 100, 200, 200);

        // 10.ctx.globalCompositeOperation = "darken"; 
        // 保留重叠部分最黑的像素。(每个颜色位进行比较，得到最小的)
        // ctx.fillStyle = "blue";
        // ctx.fillRect(0, 0, 200, 200);
    
        // ctx.globalCompositeOperation = "darken"; 
        // ctx.fillStyle = "red";
        // ctx.fillRect(100, 100, 200, 200);


        // 11.ctx.globalCompositeOperation = "lighten"; 
        // 保证重叠部分最量的像素。(每个颜色位进行比较，得到最大的)
        // ctx.fillStyle = "blue";
        // ctx.fillRect(0, 0, 200, 200);
    
        // ctx.globalCompositeOperation = "lighten"; 
        // ctx.fillStyle = "red";
        // ctx.fillRect(100, 100, 200, 200);


        // 12.ctx.globalCompositeOperation = "xor"; 
        // 重叠部分会变成透明。
        // ctx.fillStyle = "blue";
        // ctx.fillRect(0, 0, 200, 200);
    
        // ctx.globalCompositeOperation = "xor"; 
        // ctx.fillStyle = "red";
        // ctx.fillRect(100, 100, 200, 200);


         // 13.ctx.globalCompositeOperation = "copy"; 
        // 只有新图像会被保留，其余的全部被清除(边透明)。
        ctx.fillStyle = "blue";
        ctx.fillRect(0, 0, 200, 200);
    
        ctx.globalCompositeOperation = "copy"; 
        ctx.fillStyle = "red";
        ctx.fillRect(100, 100, 200, 200);


    </script>
</body>
</html>